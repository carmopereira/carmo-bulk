{"version":3,"file":"view.js","mappings":";;;;;;;;;AAAA;;;;;;SCAA;SACA;;SAEA;SACA;SACA;SACA;SACA;SACA;SACA;SACA;SACA;SACA;SACA;SACA;SACA;;SAEA;SACA;;SAEA;SACA;SACA;;;;;UCtBA;UACA;UACA;UACA,uDAAuD,iBAAiB;UACxE;UACA,gDAAgD,aAAa;UAC7D;;;;;;;;;;;;ACNA;AACA;AACA;AAC6D;;AAE7D;AACAE,MAAM,CAACC,SAAS,GAAGD,MAAM,CAACC,SAAS,IAAI,CAAC,CAAC;AAEzC,MAAM;EAAEC;AAAM,CAAC,GAAGJ,+DAAK,CAAE,cAAc,EAAE;EACxCI,KAAK,EAAE;IACN,IAAIC,SAASA,CAAA,EAAG;MACf,OAAOD,KAAK,CAACE,MAAM,GAAGF,KAAK,CAACG,QAAQ,GAAGH,KAAK,CAACI,SAAS;IACvD;EACD,CAAC;EACDC,OAAO,EAAE;IACRC,UAAUA,CAAA,EAAG;MACZ,MAAMC,OAAO,GAAGV,oEAAU,CAAC,CAAC;MAC5BU,OAAO,CAACC,MAAM,GAAG,CAAED,OAAO,CAACC,MAAM;IAClC,CAAC;IACDC,WAAWA,CAAA,EAAG;MACbT,KAAK,CAACE,MAAM,GAAG,CAAEF,KAAK,CAACE,MAAM;IAC9B;EACD,CAAC;EACDQ,SAAS,EAAE;IACVC,SAAS,EAAEA,CAAA,KAAM;MAChB,MAAM;QAAEH;MAAO,CAAC,GAAGX,oEAAU,CAAC,CAAC;MAC/B;MACAe,OAAO,CAACC,GAAG,CAAE,YAAaL,MAAM,EAAI,CAAC;IACtC;EACD;AACD,CAAE,CAAC;AAEHM,QAAQ,CAACC,gBAAgB,CAAC,kBAAkB,EAAE,YAAW;EACxD;EACAjB,MAAM,CAACC,SAAS,CAACiB,kBAAkB,GAAG,YAAW;IAChD;IACAJ,OAAO,CAACC,GAAG,CAAC,2BAA2B,CAAC;EACzC,CAAC;EAED,SAASI,SAASA,CAACC,KAAK,EAAE;IACzBA,KAAK,CAACC,cAAc,CAAC,CAAC;IACtB,MAAMC,MAAM,GAAGF,KAAK,CAACG,aAAa;IAClC,MAAMC,SAAS,GAAGF,MAAM,CAACG,OAAO,CAACD,SAAS;IAC1C,MAAME,UAAU,GAAGJ,MAAM,CAACG,OAAO,CAACC,UAAU,KAAK,MAAM;IACvD,MAAMC,aAAa,GAAGL,MAAM,CAACM,OAAO,CAAC,IAAI,CAAC,CAACC,aAAa,CAAC,iBAAiB,CAAC;IAC3E,MAAMC,QAAQ,GAAGC,QAAQ,CAACJ,aAAa,CAACK,KAAK,CAAC;;IAE9C;IACA,IAAIC,WAAW,GAAG,IAAI;IACtB,IAAIC,UAAU,GAAG,CAAC,CAAC;IAEnB,IAAIR,UAAU,EAAE;MACf,MAAMS,GAAG,GAAGb,MAAM,CAACM,OAAO,CAAC,IAAI,CAAC;MAChC,MAAMQ,gBAAgB,GAAGD,GAAG,CAACE,gBAAgB,CAAC,mBAAmB,CAAC;;MAElE;MACA,MAAMC,oBAAoB,GAAGH,GAAG,CAACN,aAAa,CAAC,eAAe,CAAC;MAC/D,IAAIS,oBAAoB,EAAE;QACzBL,WAAW,GAAGK,oBAAoB,CAACN,KAAK;MACzC;MACA;MAAA,KACK,IAAII,gBAAgB,CAACG,MAAM,GAAG,CAAC,EAAE;QACrC,IAAIC,WAAW,GAAG,IAAI;QACtBJ,gBAAgB,CAACK,OAAO,CAACC,MAAM,IAAI;UAClC,IAAI,CAACA,MAAM,CAACV,KAAK,EAAE;YAClBQ,WAAW,GAAG,KAAK;YACnBG,KAAK,CAAC,iDAAiD,CAAC;YACxD;UACD;UACAT,UAAU,CAACQ,MAAM,CAACjB,OAAO,CAACmB,SAAS,CAAC,GAAGF,MAAM,CAACV,KAAK;QACpD,CAAC,CAAC;QACF,IAAI,CAACQ,WAAW,EAAE;MACnB;IACD;IAEA,MAAMK,QAAQ,GAAG,IAAIC,QAAQ,CAAC,CAAC;IAC/BD,QAAQ,CAACE,MAAM,CAAC,YAAY,EAAEvB,SAAS,CAAC;IACxCqB,QAAQ,CAACE,MAAM,CAAC,UAAU,EAAEjB,QAAQ,CAAC;IAErC,IAAIJ,UAAU,IAAIO,WAAW,EAAE;MAC9BY,QAAQ,CAACE,MAAM,CAAC,cAAc,EAAEd,WAAW,CAAC;IAC7C,CAAC,MAAM,IAAIP,UAAU,EAAE;MACtBsB,MAAM,CAACC,IAAI,CAACf,UAAU,CAAC,CAACO,OAAO,CAACS,GAAG,IAAI;QACtCL,QAAQ,CAACE,MAAM,CAAC,aAAaG,GAAG,EAAE,EAAEhB,UAAU,CAACgB,GAAG,CAAC,CAAC;MACrD,CAAC,CAAC;IACH;IAEAC,MAAM,CAACC,IAAI,CAAC;MACXC,GAAG,EAAEC,qBAAqB,CAACC,WAAW,CAACC,QAAQ,CAAC,CAAC,CAACC,OAAO,CAAC,cAAc,EAAE,aAAa,CAAC;MACxFC,MAAM,EAAE,MAAM;MACdC,IAAI,EAAEd,QAAQ;MACde,WAAW,EAAE,KAAK;MAClBC,WAAW,EAAE,KAAK;MAClBC,OAAO,EAAE,SAAAA,CAASC,QAAQ,EAAE;QAC3B,IAAIA,QAAQ,CAACC,KAAK,EAAE;UACnBlD,OAAO,CAACkD,KAAK,CAAC,OAAO,EAAED,QAAQ,CAACE,OAAO,CAAC;UACxC;QACD;;QAEA;QACAd,MAAM,CAACC,IAAI,CAAC;UACXC,GAAG,EAAEC,qBAAqB,CAACC,WAAW,CAACC,QAAQ,CAAC,CAAC,CAACC,OAAO,CAAC,cAAc,EAAE,yBAAyB,CAAC;UACpGC,MAAM,EAAE,MAAM;UACdI,OAAO,EAAE,SAAAA,CAASC,QAAQ,EAAE;YAC3B,IAAIA,QAAQ,IAAIA,QAAQ,CAACG,SAAS,EAAE;cACnCf,MAAM,CAACgB,IAAI,CAACJ,QAAQ,CAACG,SAAS,EAAE,UAAShB,GAAG,EAAElB,KAAK,EAAE;gBACpDmB,MAAM,CAACD,GAAG,CAAC,CAACkB,WAAW,CAACpC,KAAK,CAAC;cAC/B,CAAC,CAAC;cACFmB,MAAM,CAACnC,QAAQ,CAACqD,IAAI,CAAC,CAACC,OAAO,CAAC,wBAAwB,CAAC;YACxD;YACA,MAAMC,WAAW,GAAGjD,MAAM,CAACM,OAAO,CAAC,IAAI,CAAC,CAACC,aAAa,CAAC,iBAAiB,CAAC,CAAC2C,WAAW;YACrF1D,OAAO,CAACC,GAAG,CAAC,uBAAuBwD,WAAW,KAAKzC,QAAQ,YAAY,CAAC;UACzE;QACD,CAAC,CAAC;MACH,CAAC;MACDkC,KAAK,EAAE,SAAAA,CAASS,KAAK,EAAEC,UAAU,EAAEC,WAAW,EAAE;QAC/C7D,OAAO,CAACkD,KAAK,CAAC,gCAAgC,EAAES,KAAK,CAACG,YAAY,CAAC;MACpE;IACD,CAAC,CAAC;EACH;;EAEA;EACA,MAAMC,gBAAgB,GAAG7D,QAAQ,CAACqB,gBAAgB,CAAC,YAAY,CAAC;EAChEwC,gBAAgB,CAACpC,OAAO,CAACnB,MAAM,IAAI;IAClCA,MAAM,CAACL,gBAAgB,CAAC,OAAO,EAAEE,SAAS,CAAC;EAC5C,CAAC,CAAC;EAEF,MAAM2D,aAAa,GAAG9D,QAAQ,CAACa,aAAa,CAAC,gBAAgB,CAAC;EAC9D,IAAIiD,aAAa,EAAE;IAClBA,aAAa,CAAC7D,gBAAgB,CAAC,QAAQ,EAAE,UAAS8D,CAAC,EAAE;MACpD,MAAMC,QAAQ,GAAG,IAAI,CAACvD,OAAO,CAACuD,QAAQ;MACtC,MAAMC,OAAO,GAAG,IAAI,CAACjD,KAAK;;MAE1B;MACA,MAAMqB,GAAG,GAAG,IAAI6B,GAAG,CAAClF,MAAM,CAACmF,QAAQ,CAAC;MACpC9B,GAAG,CAAC+B,YAAY,CAACC,GAAG,CAAC,SAAS,EAAEJ,OAAO,CAAC;MACxC5B,GAAG,CAAC+B,YAAY,CAACC,GAAG,CAAC,UAAU,EAAEL,QAAQ,CAAC;MAC1ChF,MAAM,CAACmF,QAAQ,CAACG,IAAI,GAAGjC,GAAG,CAACG,QAAQ,CAAC,CAAC;IACtC,CAAC,CAAC;EACH;AACD,CAAC,CAAC,C","sources":["webpack://carmo-bulk/external module \"@wordpress/interactivity\"","webpack://carmo-bulk/webpack/bootstrap","webpack://carmo-bulk/webpack/runtime/make namespace object","webpack://carmo-bulk/./src/view.js"],"sourcesContent":["module.exports = __WEBPACK_EXTERNAL_MODULE__wordpress_interactivity_8e89b257__;","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","/**\n * WordPress dependencies\n */\nimport { store, getContext } from '@wordpress/interactivity';\n\n// Namespace global para o plugin\nwindow.CarmoBulk = window.CarmoBulk || {};\n\nconst { state } = store( 'create-block', {\n\tstate: {\n\t\tget themeText() {\n\t\t\treturn state.isDark ? state.darkText : state.lightText;\n\t\t},\n\t},\n\tactions: {\n\t\ttoggleOpen() {\n\t\t\tconst context = getContext();\n\t\t\tcontext.isOpen = ! context.isOpen;\n\t\t},\n\t\ttoggleTheme() {\n\t\t\tstate.isDark = ! state.isDark;\n\t\t},\n\t},\n\tcallbacks: {\n\t\tlogIsOpen: () => {\n\t\t\tconst { isOpen } = getContext();\n\t\t\t// Log the value of `isOpen` each time it changes.\n\t\t\tconsole.log( `Is open: ${ isOpen }` );\n\t\t},\n\t},\n} );\n\ndocument.addEventListener('DOMContentLoaded', function() {\n\t// Função para criar o carrinho flutuante\n\twindow.CarmoBulk.createFloatingCart = function() {\n\t\t// Implementar lógica do carrinho flutuante aqui\n\t\tconsole.log('Carrinho flutuante criado');\n\t};\n\n\tfunction addToCart(event) {\n\t\tevent.preventDefault();\n\t\tconst button = event.currentTarget;\n\t\tconst productId = button.dataset.productId;\n\t\tconst isVariable = button.dataset.isVariable === 'true';\n\t\tconst quantityInput = button.closest('tr').querySelector('.quantity-input');\n\t\tconst quantity = parseInt(quantityInput.value);\n\n\t\t// Para produtos variáveis\n\t\tlet variationId = null;\n\t\tlet variations = {};\n\t\t\n\t\tif (isVariable) {\n\t\t\tconst row = button.closest('tr');\n\t\t\tconst variationSelects = row.querySelectorAll('.variation-select');\n\t\t\t\n\t\t\t// Se tiver apenas uma variação (input hidden)\n\t\t\tconst hiddenVariationInput = row.querySelector('.variation-id');\n\t\t\tif (hiddenVariationInput) {\n\t\t\t\tvariationId = hiddenVariationInput.value;\n\t\t\t} \n\t\t\t// Se tiver múltiplas variações (selects)\n\t\t\telse if (variationSelects.length > 0) {\n\t\t\t\tlet allSelected = true;\n\t\t\t\tvariationSelects.forEach(select => {\n\t\t\t\t\tif (!select.value) {\n\t\t\t\t\t\tallSelected = false;\n\t\t\t\t\t\talert('Por favor, selecione todas as opções do produto');\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tvariations[select.dataset.attribute] = select.value;\n\t\t\t\t});\n\t\t\t\tif (!allSelected) return;\n\t\t\t}\n\t\t}\n\n\t\tconst formData = new FormData();\n\t\tformData.append('product_id', productId);\n\t\tformData.append('quantity', quantity);\n\n\t\tif (isVariable && variationId) {\n\t\t\tformData.append('variation_id', variationId);\n\t\t} else if (isVariable) {\n\t\t\tObject.keys(variations).forEach(key => {\n\t\t\t\tformData.append(`attribute_${key}`, variations[key]);\n\t\t\t});\n\t\t}\n\n\t\tjQuery.ajax({\n\t\t\turl: wc_add_to_cart_params.wc_ajax_url.toString().replace('%%endpoint%%', 'add_to_cart'),\n\t\t\tmethod: 'POST',\n\t\t\tdata: formData,\n\t\t\tprocessData: false,\n\t\t\tcontentType: false,\n\t\t\tsuccess: function(response) {\n\t\t\t\tif (response.error) {\n\t\t\t\t\tconsole.error('Erro:', response.message);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t// Força a atualização dos fragmentos do carrinho\n\t\t\t\tjQuery.ajax({\n\t\t\t\t\turl: wc_add_to_cart_params.wc_ajax_url.toString().replace('%%endpoint%%', 'get_refreshed_fragments'),\n\t\t\t\t\tmethod: 'POST',\n\t\t\t\t\tsuccess: function(response) {\n\t\t\t\t\t\tif (response && response.fragments) {\n\t\t\t\t\t\t\tjQuery.each(response.fragments, function(key, value) {\n\t\t\t\t\t\t\t\tjQuery(key).replaceWith(value);\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\tjQuery(document.body).trigger('wc_fragments_refreshed');\n\t\t\t\t\t\t}\n\t\t\t\t\t\tconst productName = button.closest('tr').querySelector('td:nth-child(2)').textContent;\n\t\t\t\t\t\tconsole.log(`Produto adicionado: ${productName} (${quantity} unidades)`);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t},\n\t\t\terror: function(jqXHR, textStatus, errorThrown) {\n\t\t\t\tconsole.error('Erro ao adicionar ao carrinho:', jqXHR.responseText);\n\t\t\t}\n\t\t});\n\t}\n\n\t// Adiciona event listeners aos botões\n\tconst addToCartButtons = document.querySelectorAll('.carmo-atc');\n\taddToCartButtons.forEach(button => {\n\t\tbutton.addEventListener('click', addToCart);\n\t});\n\n\tconst orderbySelect = document.querySelector('.carmo-orderby');\n\tif (orderbySelect) {\n\t\torderbySelect.addEventListener('change', function(e) {\n\t\t\tconst category = this.dataset.category;\n\t\t\tconst orderby = this.value;\n\t\t\t\n\t\t\t// Recarrega a página com os novos parâmetros de ordenação\n\t\t\tconst url = new URL(window.location);\n\t\t\turl.searchParams.set('orderby', orderby);\n\t\t\turl.searchParams.set('category', category);\n\t\t\twindow.location.href = url.toString();\n\t\t});\n\t}\n});\n"],"names":["store","getContext","window","CarmoBulk","state","themeText","isDark","darkText","lightText","actions","toggleOpen","context","isOpen","toggleTheme","callbacks","logIsOpen","console","log","document","addEventListener","createFloatingCart","addToCart","event","preventDefault","button","currentTarget","productId","dataset","isVariable","quantityInput","closest","querySelector","quantity","parseInt","value","variationId","variations","row","variationSelects","querySelectorAll","hiddenVariationInput","length","allSelected","forEach","select","alert","attribute","formData","FormData","append","Object","keys","key","jQuery","ajax","url","wc_add_to_cart_params","wc_ajax_url","toString","replace","method","data","processData","contentType","success","response","error","message","fragments","each","replaceWith","body","trigger","productName","textContent","jqXHR","textStatus","errorThrown","responseText","addToCartButtons","orderbySelect","e","category","orderby","URL","location","searchParams","set","href"],"sourceRoot":""}