{"version":3,"file":"view.js","mappings":"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","sources":["webpack://carmo-bulk/external module \"@wordpress/interactivity\"","webpack://carmo-bulk/webpack/bootstrap","webpack://carmo-bulk/webpack/runtime/make namespace object","webpack://carmo-bulk/./src/view.js"],"sourcesContent":["module.exports = __WEBPACK_EXTERNAL_MODULE__wordpress_interactivity_8e89b257__;","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","/**\n * WordPress dependencies\n */\nimport { store, getContext } from '@wordpress/interactivity';\n\n// Namespace global para o plugin\nwindow.CarmoBulk = window.CarmoBulk || {};\n\nconst { state } = store( 'create-block', {\n\tstate: {\n\t\tget themeText() {\n\t\t\treturn state.isDark ? state.darkText : state.lightText;\n\t\t},\n\t},\n\tactions: {\n\t\ttoggleOpen() {\n\t\t\tconst context = getContext();\n\t\t\tcontext.isOpen = ! context.isOpen;\n\t\t},\n\t\ttoggleTheme() {\n\t\t\tstate.isDark = ! state.isDark;\n\t\t},\n\t\tclearCart() {\n\t\t\tif (confirm('Tem certeza que deseja limpar o carrinho?')) {\n\t\t\t\tjQuery.ajax({\n\t\t\t\t\turl: '/wp-json/wc/store/v1/cart/items',\n\t\t\t\t\tmethod: 'DELETE',\n\t\t\t\t\tbeforeSend: function(xhr) {\n\t\t\t\t\t\txhr.setRequestHeader('X-WC-Store-API-Nonce', document.getElementById('carmo-bulk-form').dataset.nonce);\n\t\t\t\t\t},\n\t\t\t\t\tsuccess: function(response) {\n\t\t\t\t\t\tdocument.querySelectorAll('.quantity-input').forEach(input => {\n\t\t\t\t\t\t\tinput.value = '0';\n\t\t\t\t\t\t});\n\t\t\t\t\t\t\n\t\t\t\t\t\tdocument.querySelectorAll('.cart-item-key').forEach(input => {\n\t\t\t\t\t\t\tinput.value = '';\n\t\t\t\t\t\t});\n\t\t\t\t\t\tupdateFooterCart();\n\t\t\t\t\t\tshowNotification('Carrinho limpo com sucesso');\n\t\t\t\t\t},\n\t\t\t\t\terror: function(jqXHR) {\n\t\t\t\t\t\tshowNotification('Erro ao limpar carrinho', 'error');\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t},\n\tcallbacks: {\n\t\tlogIsOpen: () => {\n\t\t\tconst { isOpen } = getContext();\n\t\t\t// Log the value of `isOpen` each time it changes.\n\t\t\tconsole.log( `Is open: ${ isOpen }` );\n\t\t},\n\t},\n} );\n\ndocument.addEventListener('DOMContentLoaded', function() {\n\t// Função para criar o carrinho flutuante\n\twindow.CarmoBulk.createFloatingCart = function() {\n\t\t// Implementar lógica do carrinho flutuante aqui\n\t\tconsole.log('Carrinho flutuante criado');\n\t};\n\n\tfunction handleQuantityChange(input, newValue) {\n\t\tif (!input) {\n\t\t\treturn Promise.reject(new Error('Input não encontrado'));\n\t\t}\n\t\t\n\t\tconst productId = input.dataset.productId;\n\t\tconsole.log('Debug: Alterando quantidade para produto', {\n\t\t\tproductId: productId,\n\t\t\tnewValue: newValue,\n\t\t\tinputValue: input.value\n\t\t});\n\t\t\n\t\tif (!productId) {\n\t\t\treturn Promise.reject(new Error('ID do produto não encontrado'));\n\t\t}\n\t\t\n\t\tconst row = input.closest('tr');\n\t\tif (!row) {\n\t\t\treturn Promise.reject(new Error('Linha da tabela não encontrada'));\n\t\t}\n\t\t\n\t\tconst cartItemKeyInput = row.querySelector('.cart-item-key');\n\t\tconst cartItemKey = cartItemKeyInput ? cartItemKeyInput.value : '';\n\t\tconsole.log('Debug: Cart Item Key', {\n\t\t\tcartItemKey: cartItemKey,\n\t\t\texists: !!cartItemKey\n\t\t});\n\n\t\t// Se a quantidade for zero e temos um cartItemKey, removemos o item\n\t\tif (newValue === 0 && cartItemKey) {\n\t\t\treturn removeFromCart(cartItemKey).then(() => {\n\t\t\t\tif (cartItemKeyInput) {\n\t\t\t\t\tcartItemKeyInput.value = '';\n\t\t\t\t}\n\t\t\t\treturn { removed: true };\n\t\t\t});\n\t\t}\n\n\t\treturn updateCart(productId, null, newValue, cartItemKey).then(response => {\n\t\t\t// Aqui está a correção: atualizar o cartItemKey após o sucesso da operação\n\t\t\tif (response && response.key) {\n\t\t\t\t// Se não existe o input para o cartItemKey, criamos um\n\t\t\t\tif (!cartItemKeyInput) {\n\t\t\t\t\tconst newCartItemKeyInput = document.createElement('input');\n\t\t\t\t\tnewCartItemKeyInput.type = 'hidden';\n\t\t\t\t\tnewCartItemKeyInput.className = 'cart-item-key';\n\t\t\t\t\trow.querySelector('.product-quantity').appendChild(newCartItemKeyInput);\n\t\t\t\t\tnewCartItemKeyInput.value = response.key;\n\t\t\t\t} else {\n\t\t\t\t\tcartItemKeyInput.value = response.key;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn response;\n\t\t});\n\t}\n\n\t// Nova função para remover item do carrinho\n\tfunction removeFromCart(cartItemKey) {\n\t\tconsole.log('Debug: Removendo item do carrinho', cartItemKey);\n\t\t\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tjQuery.ajax({\n\t\t\t\turl: '/wp-json/wc/store/v1/cart/items/' + cartItemKey,\n\t\t\t\tmethod: 'DELETE',\n\t\t\t\tbeforeSend: function(xhr) {\n\t\t\t\t\txhr.setRequestHeader('X-WC-Store-API-Nonce', document.getElementById('carmo-bulk-form').dataset.nonce);\n\t\t\t\t},\n\t\t\t\tsuccess: function(response) {\n\t\t\t\t\tconsole.log('Debug: Item removido com sucesso', response);\n\t\t\t\t\tresolve(response);\n\t\t\t\t},\n\t\t\t\terror: function(error) {\n\t\t\t\t\tconsole.log('Debug: Erro ao remover item', error);\n\t\t\t\t\treject(error);\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\t}\n\n\tfunction updateCart(productId, variationId, quantity, cartItemKey) {\n\t\tconsole.log('Debug: Iniciando updateCart', {\n\t\t\tproductId,\n\t\t\tvariationId,\n\t\t\tquantity,\n\t\t\tcartItemKey\n\t\t});\n\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tconst data = {\n\t\t\t\tid: productId,\n\t\t\t\tquantity: quantity\n\t\t\t};\n\n\t\t\tif (variationId) {\n\t\t\t\tdata.variation_id = variationId;\n\t\t\t}\n\n\t\t\tlet ajaxConfig = {\n\t\t\t\tbeforeSend: function(xhr) {\n\t\t\t\t\txhr.setRequestHeader('X-WC-Store-API-Nonce', document.getElementById('carmo-bulk-form').dataset.nonce);\n\t\t\t\t},\n\t\t\t\tdata: JSON.stringify(data),\n\t\t\t\tcontentType: 'application/json',\n\t\t\t\tsuccess: function(response) {\n\t\t\t\t\tconsole.log('Debug: Sucesso na atualização', response);\n\t\t\t\t\tresolve(response);\n\t\t\t\t},\n\t\t\t\terror: function(error) {\n\t\t\t\t\tconsole.log('Debug: Erro na atualização', error);\n\t\t\t\t\treject(error);\n\t\t\t\t}\n\t\t\t};\n\n\t\t\tif (cartItemKey) {\n\t\t\t\tconsole.log('Debug: Atualizando item existente', cartItemKey);\n\t\t\t\tjQuery.ajax({\n\t\t\t\t\t...ajaxConfig,\n\t\t\t\t\turl: '/wp-json/wc/store/v1/cart/items/' + cartItemKey,\n\t\t\t\t\tmethod: 'PUT'\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tconsole.log('Debug: Adicionando novo item');\n\t\t\t\tjQuery.ajax({\n\t\t\t\t\t...ajaxConfig,\n\t\t\t\t\turl: '/wp-json/wc/store/v1/cart/items',\n\t\t\t\t\tmethod: 'POST'\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\t}\n\n\t/**\n\t * Mostra uma notificação dentro do contêiner do bloco\n\t * @param {string} message - Mensagem a ser exibida\n\t * @param {string} type - Tipo de notificação (success/error)\n\t * @param {HTMLElement} triggerElement - Elemento que disparou a ação (para identificar o bloco)\n\t */\n\tfunction showNotification(message, type = 'success', triggerElement = null) {\n\t\t// Encontrar o bloco que contém o elemento que disparou a ação\n\t\tlet blockContainer;\n\t\t\n\t\tif (triggerElement) {\n\t\t\t// Buscar o container de bloco mais próximo\n\t\t\tblockContainer = triggerElement.closest('.carmo-bulk-container');\n\t\t\tconsole.log(`Debug: Encontrado container de bloco a partir do elemento de trigger: ${blockContainer ? 'Sim' : 'Não'}`);\n\t\t}\n\t\t\n\t\t// Se não encontrou o container a partir do elemento de trigger\n\t\tif (!blockContainer) {\n\t\t\t// Tentar usar o elemento atualmente com foco\n\t\t\tconst activeElement = document.activeElement;\n\t\t\tif (activeElement) {\n\t\t\t\tblockContainer = activeElement.closest('.carmo-bulk-container');\n\t\t\t\tconsole.log(`Debug: Encontrado container de bloco a partir do elemento ativo: ${blockContainer ? 'Sim' : 'Não'}`);\n\t\t\t}\n\t\t}\n\t\t\n\t\t// Se ainda não encontrou, tentar o primeiro bloco como fallback\n\t\tif (!blockContainer) {\n\t\t\tblockContainer = document.querySelector('.carmo-bulk-container');\n\t\t\tconsole.log('Debug: Usando primeiro container de bloco como fallback');\n\t\t}\n\t\t\n\t\t// Se realmente não encontrou nenhum container, não fazer nada\n\t\tif (!blockContainer) {\n\t\t\tconsole.error('Erro: Não foi possível encontrar um container de bloco para a notificação');\n\t\t\treturn;\n\t\t}\n\t\t\n\t\t// Obter ou criar a notificação no container\n\t\tlet notification = blockContainer.querySelector('.carmo-notification');\n\t\t\n\t\t// Se não existe um elemento de notificação, criar um\n\t\tif (!notification) {\n\t\t\tnotification = document.createElement('div');\n\t\t\tnotification.className = 'carmo-notification';\n\t\t\tblockContainer.appendChild(notification);\n\t\t\tconsole.log('Debug: Criado novo elemento de notificação no container');\n\t\t}\n\t\t\n\t\t// Configurar a notificação\n\t\tnotification.textContent = message;\n\t\tnotification.className = `carmo-notification ${type}`;\n\t\tnotification.style.display = 'block';\n\t\t\n\t\tconsole.log(`Debug: Exibindo notificação \"${message}\" (${type}) no container`);\n\t\t\n\t\t// Esconder após 3 segundos\n\t\tsetTimeout(() => {\n\t\t\tnotification.style.display = 'none';\n\t\t}, 3000);\n\t}\n\n\tfunction updateFooterCart() {\n\t\t// Abordagem oficial do WooCommerce\n\t\tif (typeof wc_cart_fragments_params !== 'undefined') {\n\t\t\t// Dispara o evento que o WooCommerce usa para atualizar fragmentos\n\t\t\tjQuery(document.body).trigger('wc_fragment_refresh');\n\t\t\t\n\t\t\tconsole.log('Debug: Evento de refresh de fragmentos disparado');\n\t\t}\n\t}\n\n\t// Função separada para atualizar os fragmentos\n\tfunction refreshFragments() {\n\t\tif (typeof wc_cart_fragments_params !== 'undefined') {\n\t\t\tjQuery.ajax({\n\t\t\t\turl: wc_cart_fragments_params.wc_ajax_url.toString().replace('%%endpoint%%', 'get_refreshed_fragments'),\n\t\t\t\ttype: 'POST',\n\t\t\t\tdata: { time: new Date().getTime() }, // Evita cache\n\t\t\t\tdataType: 'json',\n\t\t\t\tsuccess: function(data) {\n\t\t\t\t\tif (data && data.fragments) {\n\t\t\t\t\t\t// Atualiza cada fragmento no DOM\n\t\t\t\t\t\tjQuery.each(data.fragments, function(key, value) {\n\t\t\t\t\t\t\tjQuery(key).replaceWith(value);\n\t\t\t\t\t\t});\n\t\t\t\t\t\t\n\t\t\t\t\t\t// Armazena os fragmentos\n\t\t\t\t\t\tsessionStorage.setItem('wc_fragments', JSON.stringify(data.fragments));\n\t\t\t\t\t\tsessionStorage.setItem('wc_cart_hash', data.cart_hash);\n\t\t\t\t\t\t\n\t\t\t\t\t\t// Dispara eventos para notificar outros scripts\n\t\t\t\t\t\tjQuery(document.body).trigger('wc_fragments_refreshed');\n\t\t\t\t\t\tjQuery(document.body).trigger('wc_fragments_loaded');\n\t\t\t\t\t\tjQuery(document.body).trigger('updated_wc_div');\n\t\t\t\t\t\tjQuery(document.body).trigger('updated_cart_totals');\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\terror: function(error) {\n\t\t\t\t\tconsole.log('Debug: Erro ao atualizar fragmentos', error);\n\t\t\t\t\tforceFragmentRefresh();\n\t\t\t\t}\n\t\t\t});\n\t\t} else {\n\t\t\tforceFragmentRefresh();\n\t\t}\n\t}\n\n\t// Método alternativo para forçar a atualização dos fragmentos\n\tfunction forceFragmentRefresh() {\n\t\tconsole.log('Debug: Usando método alternativo para atualizar mini carrinho');\n\t\t\n\t\t// Método 2: Usar jQuery para buscar a página atual e extrair os fragmentos\n\t\tjQuery.get(window.location.href, function(response) {\n\t\t\tconst miniCart = jQuery(response).find('.widget_shopping_cart_content').html();\n\t\t\tif (miniCart) {\n\t\t\t\tjQuery('.widget_shopping_cart_content').html(miniCart);\n\t\t\t\tconsole.log('Debug: Mini carrinho atualizado via método alternativo');\n\t\t\t}\n\t\t\t\n\t\t\t// Atualizar outros elementos relacionados ao carrinho\n\t\t\tconst cartCount = jQuery(response).find('.cart-count-wrap').html();\n\t\t\tif (cartCount) {\n\t\t\t\tjQuery('.cart-count-wrap').html(cartCount);\n\t\t\t}\n\t\t});\n\t\t\n\t\t// Método 3: Último recurso - recarregar a página após um pequeno atraso\n\t\t// Comentado para não interferir na experiência do usuário, mas pode ser descomentado se necessário\n\t\t/*\n\t\tsetTimeout(function() {\n\t\t\twindow.location.reload();\n\t\t}, 2000);\n\t\t*/\n\t}\n\n\t// Adicionar listener para quando os fragmentos são atualizados\n\tjQuery(document.body).on('wc_fragments_refreshed', function() {\n\t\t// Restaurar o foco ao elemento apropriado\n\t\tconst activeElement = document.activeElement;\n\t\tif (activeElement && activeElement.classList.contains('quantity-button')) {\n\t\t\tsetTimeout(() => {\n\t\t\t\tactiveElement.focus();\n\t\t\t}, 0);\n\t\t}\n\t});\n\n\t// Manipulador para os botões de produto\n\tdocument.body.addEventListener('click', async function(e) {\n\t\tconst productButton = e.target.closest('.quantity-button');\n\t\tif (!productButton) return;\n\t\t\n\t\te.preventDefault();\n\t\t\n\t\t// Encontra a linha da tabela (tr) primeiro\n\t\tconst row = productButton.closest('tr');\n\t\tif (!row) return;\n\t\t\n\t\t// Encontra o input de quantidade na mesma linha\n\t\tconst input = row.querySelector('.quantity-input');\n\t\tif (!input) return;\n\t\t\n\t\tconst currentValue = parseInt(input.value) || 0;\n\t\tlet increment = 0;\n\t\t\n\t\t// Verifica qual botão foi clicado\n\t\tif (productButton.classList.contains('product-plus-one')) increment = 1;\n\t\telse if (productButton.classList.contains('product-plus-five')) increment = 5;\n\t\telse if (productButton.classList.contains('product-plus-ten')) increment = 10;\n\t\t\n\t\tif (increment > 0) {\n\t\t\tconst newValue = currentValue + increment;\n\t\t\tinput.value = newValue;\n\t\t\t\n\t\t\ttry {\n\t\t\t\tawait handleQuantityChange(input, newValue);\n\t\t\t\tshowNotification('Quantidade atualizada com sucesso');\n\t\t\t\tupdateFooterCart();\n\t\t\t} catch (error) {\n\t\t\t\tshowNotification('Erro ao atualizar quantidade', 'error');\n\t\t\t\tinput.value = currentValue; // Reverte para o valor anterior em caso de erro\n\t\t\t}\n\t\t}\n\n\t\t// Novo listener para o botão de reset de categoria\n\t\tif (e.target.matches('.category-reset-button')) {\n\t\t\tconst categoryId = e.target.dataset.categoryId;\n\t\t\tif (categoryId) {\n\t\t\t\tawait resetCategory(categoryId);\n\t\t\t}\n\t\t}\n\t});\n\n\t// Manipulador para o evento keypress nos inputs de quantidade\n\tdocument.body.addEventListener('keypress', async function(e) {\n\t\tif (e.target.matches('.quantity-input') && e.key === 'Enter') {\n\t\t\te.preventDefault(); // Previne o comportamento padrão do Enter\n\t\t\t\n\t\t\tconst input = e.target;\n\t\t\tconst newValue = parseInt(input.value) || 0;\n\t\t\tconst oldValue = parseInt(input.dataset.lastValue) || 0;\n\t\t\t\n\t\t\tconsole.log('Debug: Keypress event', {\n\t\t\t\tkey: e.key,\n\t\t\t\toldValue: oldValue,\n\t\t\t\tnewValue: newValue,\n\t\t\t\tinputValue: input.value,\n\t\t\t\tdatasetLastValue: input.dataset.lastValue,\n\t\t\t\thasCartKey: !!input.closest('tr').querySelector('.cart-item-key').value\n\t\t\t});\n\t\t\t\n\t\t\t// Se o valor for zero e existe um cartItemKey, sempre processa\n\t\t\tconst cartItemKey = input.closest('tr').querySelector('.cart-item-key').value;\n\t\t\tconst forceProcess = newValue === 0 && cartItemKey;\n\t\t\t\n\t\t\t// Processa se o valor mudou OU se estamos forçando a remoção com zero\n\t\t\tif (newValue !== oldValue || forceProcess) {\n\t\t\t\ttry {\n\t\t\t\t\tconst result = await handleQuantityChange(input, newValue);\n\t\t\t\t\tinput.dataset.lastValue = newValue;\n\t\t\t\t\tif (result.removed) {\n\t\t\t\t\t\tshowNotification('Produto removido do carrinho');\n\t\t\t\t\t} else {\n\t\t\t\t\t\tshowNotification('Quantidade atualizada com sucesso');\n\t\t\t\t\t}\n\t\t\t\t\tupdateFooterCart();\n\t\t\t\t\tinput.blur(); // Remove o foco do input\n\t\t\t\t} catch (error) {\n\t\t\t\t\tconsole.log('Debug: Erro no keypress event', error);\n\t\t\t\t\tshowNotification('Erro ao atualizar quantidade', 'error');\n\t\t\t\t\tinput.value = oldValue; // Reverte para o valor anterior em caso de erro\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tinput.blur(); // Remove o foco mesmo se não houver mudança\n\t\t\t}\n\t\t}\n\t});\n\n\t// Atualiza o valor inicial dos inputs\n\tdocument.querySelectorAll('.quantity-input').forEach(input => {\n\t\tinput.dataset.lastValue = input.value;\n\t});\n\n\t// Atualiza o último valor válido quando o input perde o foco\n\tdocument.body.addEventListener('blur', function(e) {\n\t\tif (e.target.matches('.quantity-input')) {\n\t\t\tconst input = e.target;\n\t\t\tconst currentValue = parseInt(input.value) || 0;\n\t\t\tinput.dataset.lastValue = currentValue;\n\t\t}\n\t}, true);\n\n\t// Também atualizamos o evento change para manter consistência\n\tdocument.body.addEventListener('change', async function(e) {\n\t\tif (e.target.matches('.quantity-input')) {\n\t\t\tconst input = e.target;\n\t\t\tconst newValue = parseInt(input.value) || 0;\n\t\t\tconst oldValue = parseInt(input.dataset.lastValue) || 0;\n\t\t\t\n\t\t\tconst cartItemKey = input.closest('tr').querySelector('.cart-item-key').value;\n\t\t\tconst forceProcess = newValue === 0 && cartItemKey;\n\t\t\t\n\t\t\tif (newValue !== oldValue || forceProcess) {\n\t\t\t\tconsole.log('Debug: Change event', {\n\t\t\t\t\toldValue: oldValue,\n\t\t\t\t\tnewValue: newValue,\n\t\t\t\t\tinputValue: input.value,\n\t\t\t\t\tdatasetLastValue: input.dataset.lastValue,\n\t\t\t\t\thasCartKey: !!cartItemKey\n\t\t\t\t});\n\t\t\t\t\n\t\t\t\ttry {\n\t\t\t\t\tconst result = await handleQuantityChange(input, newValue);\n\t\t\t\t\tinput.dataset.lastValue = newValue;\n\t\t\t\t\tif (result.removed) {\n\t\t\t\t\t\tshowNotification('Produto removido do carrinho');\n\t\t\t\t\t} else {\n\t\t\t\t\t\tshowNotification('Quantidade atualizada com sucesso');\n\t\t\t\t\t}\n\t\t\t\t\tupdateFooterCart();\n\t\t\t\t} catch (error) {\n\t\t\t\t\tconsole.log('Debug: Erro no change event', error);\n\t\t\t\t\tshowNotification('Erro ao atualizar quantidade', 'error');\n\t\t\t\t\tinput.value = oldValue;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t});\n\n\t// Inicializa os valores do carrinho\n\tfunction updateQuantitiesFromCart() {\n\t\tconsole.log('Debug: Iniciando updateQuantitiesFromCart');\n\t\t\n\t\t// Tentar uma abordagem diferente usando o endpoint do Store API do WooCommerce\n\t\tjQuery.ajax({\n\t\t\turl: '/wp-json/wc/store/v1/cart',\n\t\t\ttype: 'GET',\n\t\t\tbeforeSend: function(xhr) {\n\t\t\t\tconst nonceElement = document.getElementById('carmo-bulk-form');\n\t\t\t\tif (nonceElement && nonceElement.dataset.nonce) {\n\t\t\t\t\txhr.setRequestHeader('X-WC-Store-API-Nonce', nonceElement.dataset.nonce);\n\t\t\t\t}\n\t\t\t},\n\t\t\tsuccess: function(response) {\n\t\t\t\tconsole.log('Debug: Resposta da Store API recebida');\n\t\t\t\t\n\t\t\t\t// Mapear produtos no carrinho\n\t\t\t\tconst productsInCart = {};\n\t\t\t\t\n\t\t\t\tif (response && response.items && Array.isArray(response.items)) {\n\t\t\t\t\tconsole.log('Debug: Encontrados', response.items.length, 'itens no carrinho');\n\t\t\t\t\t\n\t\t\t\t\tresponse.items.forEach(item => {\n\t\t\t\t\t\t// O ID pode estar em diferentes locais dependendo da estrutura\n\t\t\t\t\t\tconst productId = item.id || \n\t\t\t\t\t\t\t\t\t\t(item.product_id ? item.product_id.toString() : null) || \n\t\t\t\t\t\t\t\t\t\t(item.product && item.product.id ? item.product.id.toString() : null);\n\t\t\t\t\t\t\n\t\t\t\t\t\tif (productId) {\n\t\t\t\t\t\t\tproductsInCart[productId] = {\n\t\t\t\t\t\t\t\tquantity: item.quantity,\n\t\t\t\t\t\t\t\tkey: item.key\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\tconsole.log('Debug: Estrutura de resposta não reconhecida ou carrinho vazio');\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t// Encontrar todos os inputs de quantidade\n\t\t\t\tconst inputs = document.querySelectorAll('.quantity-input');\n\t\t\t\tconsole.log('Debug: Total de inputs encontrados', inputs.length);\n\t\t\t\t\n\t\t\t\t// Reset todos os inputs primeiro (opção 1: zerar tudo)\n\t\t\t\tinputs.forEach(function(input) {\n\t\t\t\t\tconst productId = input.dataset.productId;\n\t\t\t\t\tconst row = input.closest('tr');\n\t\t\t\t\tif (!row) return;\n\t\t\t\t\t\n\t\t\t\t\t// Verifica se o produto está no carrinho\n\t\t\t\t\tif (productsInCart[productId]) {\n\t\t\t\t\t\tconst cartInfo = productsInCart[productId];\n\t\t\t\t\t\t\n\t\t\t\t\t\t// Atualiza o input com a quantidade\n\t\t\t\t\t\tinput.value = cartInfo.quantity;\n\t\t\t\t\t\tinput.dataset.lastValue = cartInfo.quantity;\n\t\t\t\t\t\t\n\t\t\t\t\t\t// Atualiza ou cria o cartItemKey\n\t\t\t\t\t\tlet cartItemKeyInput = row.querySelector('.cart-item-key');\n\t\t\t\t\t\tif (!cartItemKeyInput) {\n\t\t\t\t\t\t\tcartItemKeyInput = document.createElement('input');\n\t\t\t\t\t\t\tcartItemKeyInput.type = 'hidden';\n\t\t\t\t\t\t\tcartItemKeyInput.className = 'cart-item-key';\n\t\t\t\t\t\t\trow.querySelector('.product-quantity').appendChild(cartItemKeyInput);\n\t\t\t\t\t\t}\n\t\t\t\t\t\t\n\t\t\t\t\t\tcartItemKeyInput.value = cartInfo.key;\n\t\t\t\t\t} else {\n\t\t\t\t\t\t// Zera o input\n\t\t\t\t\t\tinput.value = 0;\n\t\t\t\t\t\tinput.dataset.lastValue = 0;\n\t\t\t\t\t\t\n\t\t\t\t\t\t// Limpa o cartItemKey se existir\n\t\t\t\t\t\tconst cartItemKeyInput = row.querySelector('.cart-item-key');\n\t\t\t\t\t\tif (cartItemKeyInput) {\n\t\t\t\t\t\t\tcartItemKeyInput.value = '';\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t},\n\t\t\terror: function(error) {\n\t\t\t\tconsole.log('Debug: Erro ao obter carrinho via Store API', error);\n\t\t\t\t\n\t\t\t\t// Tenta o método alternativo como fallback\n\t\t\t\tif (typeof wc_cart_fragments_params !== 'undefined') {\n\t\t\t\t\tjQuery.ajax({\n\t\t\t\t\t\turl: wc_cart_fragments_params.wc_ajax_url.toString().replace('%%endpoint%%', 'get_refreshed_fragments'),\n\t\t\t\t\t\ttype: 'POST',\n\t\t\t\t\t\tsuccess: function(data) {\n\t\t\t\t\t\t\tconsole.log('Debug: Fragments obtidos');\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t// Atualiza os fragmentos\n\t\t\t\t\t\t\tif (data && data.fragments) {\n\t\t\t\t\t\t\t\tjQuery.each(data.fragments, function(key, value) {\n\t\t\t\t\t\t\t\t\tjQuery(key).replaceWith(value);\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t// Trigger eventos do WooCommerce\n\t\t\t\t\t\t\tjQuery(document.body).trigger('wc_fragments_refreshed');\n\t\t\t\t\t\t\tjQuery(document.body).trigger('updated_cart_totals');\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n\n\t// Inicializa o estado do carrinho\n\tupdateQuantitiesFromCart();\n\n\tconst orderbySelect = document.querySelector('.carmo-orderby');\n\tif (orderbySelect) {\n\t\torderbySelect.addEventListener('change', function(e) {\n\t\t\tconst category = this.dataset.category;\n\t\t\tconst orderby = this.value;\n\t\t\t\n\t\t\t// Recarrega a página com os novos parâmetros de ordenação\n\t\t\tconst url = new URL(window.location);\n\t\t\turl.searchParams.set('orderby', orderby);\n\t\t\turl.searchParams.set('category', category);\n\t\t\twindow.location.href = url.toString();\n\t\t});\n\t}\n\n\t// Adicione uma função para processar o reset de categoria\n\tasync function resetCategory(categoryId) {\n\t\tconst inputs = document.querySelectorAll(`.quantity-input[data-category-id=\"${categoryId}\"]`);\n\t\tif (!inputs.length) {\n\t\t\tconsole.warn(`Nenhum produto encontrado para a categoria ${categoryId}`);\n\t\t\treturn;\n\t\t}\n\t\t\n\t\tconsole.log(`Resetando ${inputs.length} produtos da categoria ${categoryId}`);\n\t\tlet removedKeys = [];\n\t\t\n\t\t// Primeiro, reunimos todos os produtos que serão zerados\n\t\tconst productsToReset = [];\n\t\tinputs.forEach(input => {\n\t\t\tif (input.value && input.value !== '0') {\n\t\t\t\tconst productId = input.dataset.productId;\n\t\t\t\tconst variationId = input.dataset.variationId || 0;\n\t\t\t\tconst cartItemKey = input.dataset.cartItemKey || '';\n\t\t\t\t\n\t\t\t\tif (cartItemKey) {\n\t\t\t\t\tremovedKeys.push(cartItemKey);\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tproductsToReset.push({\n\t\t\t\t\tinput,\n\t\t\t\t\tproductId, \n\t\t\t\t\tvariationId,\n\t\t\t\t\tcartItemKey\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\t\t\n\t\t// Verificar se não há produtos para resetar\n\t\tif (productsToReset.length === 0) {\n\t\t\tconsole.warn(`Nenhum produto com quantidade a resetar na categoria ${categoryId}`);\n\t\t\treturn;\n\t\t}\n\t\t\n\t\t// Notifica o usuário que o processo começou\n\t\tconst triggerElement = document.querySelector(`.category-reset-button[data-category-id=\"${categoryId}\"]`);\n\t\tshowNotification(`Removendo ${productsToReset.length} produtos do carrinho...`, 'success', triggerElement);\n\t\t\n\t\t// Zero as quantidades nos inputs\n\t\tproductsToReset.forEach(product => {\n\t\t\tproduct.input.value = '0';\n\t\t});\n\t\t\n\t\t// Agora executamos a remoção real do carrinho\n\t\ttry {\n\t\t\t// Usar AJAX para remover todos os itens de uma vez\n\t\t\tconst response = await jQuery.ajax({\n\t\t\t\turl: carmo_bulk_data.ajax_url,\n\t\t\t\ttype: 'POST',\n\t\t\t\tdata: {\n\t\t\t\t\taction: 'carmo_bulk_reset_category',\n\t\t\t\t\tcategory_id: categoryId,\n\t\t\t\t\tsecurity: carmo_bulk_data.nonce\n\t\t\t\t}\n\t\t\t});\n\t\t\t\n\t\t\tif (response.success) {\n\t\t\t\t// Atualiza o footer do carrinho após a conclusão\n\t\t\t\tupdateFooterCart();\n\t\t\t\t\n\t\t\t\t// Verificar se há chaves de itens do carrinho específicas para remover\n\t\t\t\tif (removedKeys.length > 0) {\n\t\t\t\t\t// Verifica se os itens foram realmente removidos\n\t\t\t\t\tverifyCartItems(removedKeys);\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t// Notifica o usuário sobre o sucesso\n\t\t\t\tshowNotification(`${productsToReset.length} produtos removidos do carrinho`, 'success', triggerElement);\n\t\t\t\t\n\t\t\t\t// Redefinir as chaves do carrinho nos inputs\n\t\t\t\tproductsToReset.forEach(product => {\n\t\t\t\t\tif (product.input.dataset.cartItemKey) {\n\t\t\t\t\t\tproduct.input.dataset.cartItemKey = '';\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tconsole.error('Erro ao resetar categoria:', response.data);\n\t\t\t\tshowNotification('Erro ao remover produtos do carrinho', 'error', triggerElement);\n\t\t\t}\n\t\t} catch (error) {\n\t\t\tconsole.error('Erro ao processar reset da categoria:', error);\n\t\t\tshowNotification('Erro ao processar a remoção de produtos', 'error', triggerElement);\n\t\t}\n\t}\n\n\t// Nova função para verificar se os itens foram realmente removidos\n\tfunction verifyCartItems(removedKeys) {\n\t\tif (!removedKeys || !removedKeys.length) return;\n\t\t\n\t\t// Obtém informações atualizadas do carrinho\n\t\tjQuery.ajax({\n\t\t\turl: carmo_bulk_data.ajax_url,\n\t\t\ttype: 'POST',\n\t\t\tdata: {\n\t\t\t\taction: 'carmo_bulk_get_cart',\n\t\t\t\tsecurity: carmo_bulk_data.nonce\n\t\t\t},\n\t\t\tsuccess: function(response) {\n\t\t\t\tif (!response.success) {\n\t\t\t\t\tconsole.error('Erro ao verificar carrinho:', response.data);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tconst currentCart = response.data;\n\t\t\t\tconst keysStillInCart = [];\n\t\t\t\t\n\t\t\t\tremovedKeys.forEach(key => {\n\t\t\t\t\tif (currentCart.cart_contents && currentCart.cart_contents[key]) {\n\t\t\t\t\t\tkeysStillInCart.push(key);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\t\n\t\t\t\tif (keysStillInCart.length > 0) {\n\t\t\t\t\tconsole.warn('Alguns produtos não foram removidos corretamente:', keysStillInCart);\n\t\t\t\t\tshowNotification('Alguns produtos não foram removidos corretamente do carrinho', 'error');\n\t\t\t\t\t\n\t\t\t\t\t// Força uma atualização completa dos fragmentos\n\t\t\t\t\tforceFragmentRefresh();\n\t\t\t\t} else {\n\t\t\t\t\tconsole.log('Todos os produtos foram removidos com sucesso do carrinho');\n\t\t\t\t}\n\t\t\t},\n\t\t\terror: function(error) {\n\t\t\t\tconsole.error('Erro ao verificar itens do carrinho:', error);\n\t\t\t}\n\t\t});\n\t}\n\n\t// Adiciona o event listener para o botão de reset\n\tdocument.body.addEventListener('click', function(e) {\n\t\tconsole.log('Debug: Click event', {\n\t\t\ttarget: e.target.tagName,\n\t\t\tclassName: e.target.className,\n\t\t\tisResetButton: e.target.matches('.category-reset-button')\n\t\t});\n\t\t\n\t\t// Novo listener para o botão de reset de categoria\n\t\tif (e.target.matches('.category-reset-button')) {\n\t\t\tconst categoryId = e.target.dataset.categoryId;\n\t\t\tconsole.log('Debug: Botão reset clicado', { categoryId });\n\t\t\t\n\t\t\tif (categoryId) {\n\t\t\t\tresetCategory(categoryId).catch(error => {\n\t\t\t\t\tconsole.log('Debug: Erro ao executar resetCategory', error);\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tconsole.log('Debug: categoryId não encontrado no botão');\n\t\t\t}\n\t\t}\n\t\t\n\t\t// Lógica existente para outros botões...\n\t});\n\n\t/**\n\t * Diagnóstico e implementação da funcionalidade de aplicar a todos\n\t */\n\tfunction handleCategoryApply() {\n\t\tconst categoryApplyButtons = document.querySelectorAll('.category-apply-button');\n\t\t\n\t\tconsole.log(`Debug: Encontrados ${categoryApplyButtons.length} botões de aplicar categoria`);\n\t\t\n\t\tcategoryApplyButtons.forEach(button => {\n\t\t\tbutton.addEventListener('click', function(event) {\n\t\t\t\tevent.preventDefault();\n\t\t\t\tevent.stopPropagation();\n\t\t\t\t\n\t\t\t\tconst categoryId = this.dataset.categoryId;\n\t\t\t\tconsole.log(`Debug: Botão de categoria ${categoryId} clicado`);\n\t\t\t\t\n\t\t\t\t// Buscar o input de categoria usando diferentes seletores (verificação mais robusta)\n\t\t\t\tlet categoryInput = null;\n\t\t\t\t\n\t\t\t\t// Tentar encontrar por seletor específico\n\t\t\t\tcategoryInput = document.querySelector(`.category-quantity-input[data-category-id=\"${categoryId}\"]`);\n\t\t\t\t\n\t\t\t\t// Se não encontrou, tenta buscar input próximo ao botão\n\t\t\t\tif (!categoryInput) {\n\t\t\t\t\tconst parentElement = this.parentElement;\n\t\t\t\t\tif (parentElement) {\n\t\t\t\t\t\tcategoryInput = parentElement.querySelector('input[type=\"number\"]');\n\t\t\t\t\t\tconsole.log(`Debug: Procurando input no elemento pai: ${categoryInput ? 'Encontrado' : 'Não encontrado'}`);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t// Último recurso: buscar qualquer input com o mesmo data-category-id\n\t\t\t\tif (!categoryInput) {\n\t\t\t\t\tcategoryInput = document.querySelector(`input[data-category-id=\"${categoryId}\"]`);\n\t\t\t\t\tconsole.log(`Debug: Procurando qualquer input com data-category-id: ${categoryInput ? 'Encontrado' : 'Não encontrado'}`);\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t// Determinar o valor a ser aplicado\n\t\t\t\tlet valueToApply = '1';  // Valor padrão\n\t\t\t\t\n\t\t\t\tif (categoryInput && categoryInput.value && categoryInput.value !== '') {\n\t\t\t\t\tvalueToApply = categoryInput.value;\n\t\t\t\t\tconsole.log(`Debug: INPUT ENCONTRADO! Valor a ser aplicado: ${valueToApply}`);\n\t\t\t\t} else {\n\t\t\t\t\tconsole.log(`Debug: Nenhum input válido encontrado. Usando valor padrão: ${valueToApply}`);\n\t\t\t\t\t\n\t\t\t\t\t// Encontrar todos os inputs numéricos para diagnóstico\n\t\t\t\t\tconst allInputs = document.querySelectorAll('input[type=\"number\"]');\n\t\t\t\t\tconsole.log(`Debug: Total de inputs numéricos na página: ${allInputs.length}`);\n\t\t\t\t\t\n\t\t\t\t\t// Listar os primeiros 5 inputs para diagnóstico\n\t\t\t\t\tconsole.log('Debug: Amostra de inputs disponíveis:');\n\t\t\t\t\tArray.from(allInputs).slice(0, 5).forEach((input, i) => {\n\t\t\t\t\t\tconsole.log(`Input ${i+1}: ID=${input.id}, Classes=${input.className}, Value=${input.value}, Data:`, input.dataset);\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t// Encontrar todos os inputs da categoria\n\t\t\t\tconst categoryInputs = document.querySelectorAll(`.quantity-input[data-category-id=\"${categoryId}\"]`);\n\t\t\t\t\n\t\t\t\tif (categoryInputs.length === 0) {\n\t\t\t\t\tconsole.log(`Debug: Nenhum input de produto encontrado para a categoria ${categoryId}`);\n\t\t\t\t\talert(`Erro: Não foi possível encontrar produtos para esta categoria (${categoryId})`);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tconsole.log(`Debug: Aplicando valor ${valueToApply} a ${categoryInputs.length} produtos da categoria ${categoryId}`);\n\t\t\t\t\n\t\t\t\t// Aplicar o valor a todos os produtos sequencialmente\n\t\t\t\tapplyValueSequentially(Array.from(categoryInputs), 0, valueToApply, categoryId);\n\t\t\t});\n\t\t});\n\t}\n\n\t/**\n\t * Aplica um valor específico a inputs sequencialmente\n\t * Com checagem de modificação de valor reforçada\n\t */\n\tfunction applyValueSequentially(inputs, index, valueToApply, categoryId) {\n\t\t// Se terminou todos os inputs\n\t\tif (index >= inputs.length) {\n\t\t\tconsole.log(`Debug: Atualizados ${inputs.length} produtos da categoria ${categoryId}`);\n\t\t\t//alert(`Aplicado o valor ${valueToApply} a ${inputs.length} produtos da categoria`);\n\t\t\tupdateFooterCart();\n\t\t\treturn;\n\t\t}\n\t\t\n\t\tconst input = inputs[index];\n\t\tconst productId = input.dataset.productId;\n\t\tconst oldValue = input.value;\n\t\t\n\t\tconsole.log(`Debug [${index+1}/${inputs.length}]: Aplicando valor ${valueToApply} ao produto ${productId} (valor anterior: ${oldValue})`);\n\t\t\n\t\ttry {\n\t\t\t// IMPORTANTE: Primeiro definir o valor explicitamente no input\n\t\t\tinput.value = valueToApply;\n\t\t\t\n\t\t\t// Verificar se o valor foi realmente alterado no DOM\n\t\t\tconsole.log(`Debug: Valor do input após atribuição: ${input.value}`);\n\t\t\t\n\t\t\t// Depois disparar o evento de mudança\n\t\t\tif (typeof handleQuantityChange === 'function') {\n\t\t\t\tconsole.log(`Debug: Chamando handleQuantityChange diretamente`);\n\t\t\t\thandleQuantityChange(input, valueToApply);\n\t\t\t} else {\n\t\t\t\tconsole.log(`Debug: Disparando evento change manualmente`);\n\t\t\t\tconst event = new Event('change', { bubbles: true });\n\t\t\t\tinput.dispatchEvent(event);\n\t\t\t}\n\t\t\t\n\t\t\t// Processar o próximo após um pequeno delay\n\t\t\tsetTimeout(function() {\n\t\t\t\tapplyValueSequentially(inputs, index + 1, valueToApply, categoryId);\n\t\t\t}, 200);\n\t\t\t\n\t\t\t// Adicione isso antes do setTimeout\n\t\t\tif (index === inputs.length - 1) {\n\t\t\t\t// Usando o último input como referência para o contêiner do bloco\n\t\t\t\tshowNotification(`Aplicado valor ${valueToApply} a todos os produtos da categoria`, 'success', input);\n\t\t\t}\n\t\t\t\n\t\t} catch (e) {\n\t\t\tconsole.error(`Erro ao aplicar valor: ${e.message}`);\n\t\t\tshowNotification('Erro ao aplicar valor aos produtos', 'error', input);\n\t\t}\n\t}\n\n\t// Garantir que os eventos sejam registrados quando o DOM estiver pronto\n\tdocument.addEventListener('DOMContentLoaded', function() {\n\t\tconsole.log('Debug: DOM carregado, inicializando manipuladores de eventos');\n\t\t\n\t\t// Inicializar manipuladores de eventos para botões de categoria\n\t\thandleCategoryApply();\n\t\t\n\t\t// Adicionar também após um curto delay (para casos onde o conteúdo é carregado dinamicamente)\n\t\tsetTimeout(function() {\n\t\t\tconsole.log('Debug: Verificando botões após delay');\n\t\t\thandleCategoryApply();\n\t\t}, 1000);\n\t});\n\n\t// Adicionar também no evento load (para quando imagens e outros recursos terminarem de carregar)\n\twindow.addEventListener('load', function() {\n\t\tconsole.log('Debug: Página totalmente carregada, verificando botões novamente');\n\t\thandleCategoryApply();\n\t});\n});\n"],"names":["store","getContext","window","CarmoBulk","state","themeText","isDark","darkText","lightText","actions","toggleOpen","context","isOpen","toggleTheme","clearCart","confirm","jQuery","ajax","url","method","beforeSend","xhr","setRequestHeader","document","getElementById","dataset","nonce","success","response","querySelectorAll","forEach","input","value","updateFooterCart","showNotification","error","jqXHR","callbacks","logIsOpen","console","log","addEventListener","createFloatingCart","handleQuantityChange","newValue","Promise","reject","Error","productId","inputValue","row","closest","cartItemKeyInput","querySelector","cartItemKey","exists","removeFromCart","then","removed","updateCart","key","newCartItemKeyInput","createElement","type","className","appendChild","resolve","variationId","quantity","data","id","variation_id","ajaxConfig","JSON","stringify","contentType","message","triggerElement","blockContainer","activeElement","notification","textContent","style","display","setTimeout","wc_cart_fragments_params","body","trigger","refreshFragments","wc_ajax_url","toString","replace","time","Date","getTime","dataType","fragments","each","replaceWith","sessionStorage","setItem","cart_hash","forceFragmentRefresh","get","location","href","miniCart","find","html","cartCount","on","classList","contains","focus","e","productButton","target","preventDefault","currentValue","parseInt","increment","matches","categoryId","resetCategory","oldValue","lastValue","datasetLastValue","hasCartKey","forceProcess","result","blur","updateQuantitiesFromCart","nonceElement","productsInCart","items","Array","isArray","length","item","product_id","product","inputs","cartInfo","orderbySelect","category","orderby","URL","searchParams","set","warn","removedKeys","productsToReset","push","carmo_bulk_data","ajax_url","action","category_id","security","verifyCartItems","currentCart","keysStillInCart","cart_contents","tagName","isResetButton","catch","handleCategoryApply","categoryApplyButtons","button","event","stopPropagation","categoryInput","parentElement","valueToApply","allInputs","from","slice","i","categoryInputs","alert","applyValueSequentially","index","Event","bubbles","dispatchEvent"],"sourceRoot":""}